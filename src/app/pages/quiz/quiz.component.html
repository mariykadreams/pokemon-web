<main class="container">
    <section id="game-menu" *ngIf="!isRunning && !gameEnded">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-8">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <h1 class="text-center mb-3">Pokémon Quiz</h1>

                        <p class="text-center mb-3"><b>Objective:</b> Guess the Pokémon hidden in the silhouette before time runs out!</p>

                        <ul class="list-unstyled text-center mb-3">
                            <li class="mb-1"><b>Silhouette:</b> A dark <a href="https://bulbapedia.bulbagarden.net/wiki/Who%27s_That_Pok%C3%A9mon%3F" target="_blank" class="external-link">Pokémon outline</a> is shown—no colors or details.</li>
                            <li class="mb-1"><b>Guessing:</b> Select the Pokémon's name.</li>
                            <li class="mb-1"><b>Scoring:</b> Correct answers give 1 point.</li>
                            <li class="mb-1"><b>Timer:</b> You have 60 seconds to answer as many questions as possible.</li>
                            <li class="mb-1"><b>Goal:</b> Guess as many Pokémon as possible before time runs out!</li>
                        </ul>

                        <p class="text-center mb-2"><b>Tips:</b></p>
                        <ul class="list-unstyled text-center mb-0">
                            <li class="mb-1">Focus on the shape—many Pokémon have unique outlines.</li>
                            <li class="mb-1">Types and evolutions can help you narrow down possibilities.</li>
                            <li class="mb-1">The more you play, the faster you'll recognize them!</li>
                        </ul>

                        <div id="game-links" class="d-grid gap-2 mt-4">
                            <button id="start-quiz-button" class="btn btn-warning fw-bold" (click)="startQuiz()">Start Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="quiz-area" aria-label="Quiz area">
        <div id="timer-and-score" [class.active]="isRunning" class="bg-white shadow-sm rounded-2 px-2 py-1">
            <div id="timer" [style.color]="timerColor">Time: {{ timeRemaining }}s</div>
            <div id="score">Score: {{ score }}</div>
            <div id="question-counter">Question {{ currentQuestion + 1 }}/{{ QUESTIONS_PER_ROUND }}</div>
        </div>

        <section id="quiz-container" class="card shadow-sm quiz-box" *ngIf="isRunning">
            <div class="card-body p-4 text-center">
                <img [id]="'pokemon-image'" [src]="currentQuestionData?.silhouette" alt="Mystery Pokémon" class="img-fluid rounded mb-3">
                <h1 class="h4 mb-3">Who's that Pokémon?</h1>

                <div class="d-grid gap-2 options">
                    <button
                        *ngFor="let option of shuffledOptions"
                        class="btn btn-warning fw-bold"
                        (click)="checkAnswer(option)"
                        [disabled]="userAnswered">
                        {{ option }}
                    </button>
                </div>

                <div class="result mt-3 fw-semibold" [style.color]="resultColor" id="result">{{ resultMessage }}</div>

                <button
                    id="next-question-button"
                    class="btn btn-outline-secondary w-100 fw-semibold mt-3"
                    *ngIf="userAnswered && currentQuestion < QUESTIONS_PER_ROUND - 1"
                    (click)="nextQuestion()">
                    Next Question
                </button>
            </div>
        </section>

        <section id="game-ended" *ngIf="gameEnded" class="mt-3">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6">
                    <div class="card shadow-sm">
                        <div class="card-body p-4 text-center">
                            <p id="final-score-message" class="h5 mb-3">{{ finalScoreMessage }}</p>
                            <button id="back-to-menu-button" class="btn btn-warning w-100 fw-bold" (click)="backToMenu()">Back</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </section>
</main>
